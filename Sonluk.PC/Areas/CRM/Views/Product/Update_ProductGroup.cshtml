@{
    Layout = "~/Views/Shared/_Layout_CRM.cshtml";
    ViewBag.Title = "编辑产品组";
    string netpath = System.Configuration.ConfigurationManager.AppSettings["NETPATH"];
}

<script type="text/html" id="bar">
    <a class="layui-btn layui-btn-xs layui-btn-danger" lay-event="delete">删除</a>
</script>
<script type="text/html" id="indexTpl">
    {{d.LAY_TABLE_INDEX+1}}
</script>



<script type="text/html" id="zhuangtai">
    {{# if(d.ISACTIVE == 1){ }}
    未提交
    {{# }else if(d.ISACTIVE == 2){ }}
    审核中
    {{# }else if(d.ISACTIVE == 3){ }}
    已审核
    {{# }else { }}

    {{# } }}
</script>

<script type="text/html" id="official">
    {{# if(d.IsOfficial == 10){ }}
    潜在客户
    {{# }else if(d.IsOfficial == 20){ }}
    签约客户
    {{# }else if(d.IsOfficial == 30){ }}
    非签约客户
    {{# }else { }}

    {{# } }}
</script>

<script type="text/html" id="havepower">
    {{# if(d.GIDSTATUS == 1){ }}
    是
    {{# }else if(d.GIDSTATUS == 0){ }}
    否
    {{# }else { }}

    {{# } }}
</script>

<style type="text/css">
    body .layui-tree-skin-shihuang .layui-tree-branch {
        color: #EDCA50;
    }

    .downpanel .layui-select-title span {
        line-height: 38px;
    }

    /*继承父类颜色*/
    .downpanel dl dd:hover {
        background-color: inherit;
    }
</style>

<span class="layui-breadcrumb" lay-separator=">">
    <a href="../Public/Index1">首页</a>
    <a>产品管理</a>
    <a><cite>编辑产品组</cite></a>
</span>
<br />
<br />
<div id="from1" class="layui-form layui-form-pane">
    <div id="div1" class="layui-form">

        <div class="layui-form-item">
            <button id="btn_insert" class="layui-btn">新增产品</button>

            <button id="btn_delete" class="layui-btn">批量删除</button>

        </div>

        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label" style="width:130px;text-align:right;">产品组名称：</label>
                <div class="layui-input-inline">
                    <input id="name" type="text" autocomplete="off" class="layui-input">
                </div>
            </div>


        </div>


        <div class="layui-collapse">
            <div class="layui-colla-item">
                <h2 class="layui-colla-title">查询条件</h2>
                <div id="div_select_tiaojian" class="layui-colla-content layui-show">
                    <div class="layui-form-item">
                        <button id="btn_cx" class="layui-btn">查询</button>
                    </div>

                    <div class="layui-form-item">

                        <div class="layui-inline">
                            <label class="layui-form-label" style="width:130px;text-align:right;">产品类型：</label>
                            <div class="layui-input-inline">
                                <input id="name" type="text" autocomplete="off" class="layui-input">
                            </div>
                        </div>

                        <div class="layui-inline">
                            <label class="layui-form-label" style="width:130px;text-align:right;">产品系列：</label>
                            <div class="layui-input-inline">
                                <input id="name" type="text" autocomplete="off" class="layui-input">
                            </div>
                        </div>

                        <div class="layui-inline">
                            <label class="layui-form-label" style="width:130px;text-align:right;">产品型号：</label>
                            <div class="layui-input-inline">
                                <input id="name" type="text" autocomplete="off" class="layui-input">
                            </div>
                        </div>

                        <div class="layui-inline">
                            <label class="layui-form-label" style="width:130px;text-align:right;">产品品号：</label>
                            <div class="layui-input-inline">
                                <input id="name" type="text" autocomplete="off" class="layui-input">
                            </div>
                        </div>

                        <div class="layui-inline">
                            <label class="layui-form-label" style="width:130px;text-align:right;">产品名称：</label>
                            <div class="layui-input-inline">
                                <input id="name" type="text" autocomplete="off" class="layui-input">
                            </div>
                        </div>





                    </div>






                </div>
            </div>
        </div>

        <table id="result" lay-filter="result"></table>

    </div>






</div>

<div id="div_jump" class="layui-form" hidden>

    <br />

    <div class="layui-form-item">

        <div class="layui-inline">
            <label class="layui-form-label" style="text-align:right;">产品类型：</label>
            <div class="layui-input-inline" style="width:220px;">
                <select id="mx_timetype" lay-filter="mx_timetype">
                    <option value="0" selected="selected"></option>
                </select>
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label" style="text-align:right;">产品系列：</label>
            <div class="layui-input-inline" style="width:220px;">
                <select id="mx_timetype" lay-filter="mx_timetype">
                    <option value="0" selected="selected"></option>
                </select>
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label" style="text-align:right;">产品型号：</label>
            <div class="layui-input-inline" style="width:220px;">
                <select id="mx_timetype" lay-filter="mx_timetype">
                    <option value="0" selected="selected"></option>
                </select>
            </div>
        </div>


        <div class="layui-inline">
            <label class="layui-form-label" style="text-align:right;">产品名称：</label>
            <div class="layui-input-inline" style="width:220px;">
                <select id="mx_timetype" lay-filter="mx_timetype">
                    <option value="0" selected="selected"></option>
                </select>
            </div>
        </div>





    </div>

</div>


<input id="netpath" hidden />

@*<script>
        $(document).ready(function () {
            $("#reset").trigger('click');
        });
    </script>*@



<script src="~/Scripts/layui2.2.5/layui.all.js"></script>





@*<script src="~/Scripts/layui2.2.5/layui.all.js"></script>*@
<script src="~/layui/layui.all.js"></script>


<script>
    $(document).ready(function () {
        $("#netpath").val("@netpath");
        $("#daochu").click(function () {
            //新增区域信息
            return false;
        });
    });
</script>
<script>
    $("#btn_insert").click(function () {
        layer.open({
            type: 1,
            shade: 0,
            area: ['400px', '500px'], //宽高
            content: $('#div_jump'),
            title: '新增产品组',
            btn: ['保存', '取消'],
            moveOut: true,
            yes: function (index, layero) {




            },
            end: function () {
                $('#div_jump').hide();
            }
        });

    });

    layui.use(['form', 'layer', 'element', 'laydate', 'upload'], function () {
        var form = layui.form;
        var element = layui.element;
        var table = layui.table;
        var laydate = layui.laydate;

        laydate.render({
            elem: '#time_open'
        });

        var data = [{
            name:"XXXXXX客户",
            type: "碳性电池",
            xilie: "黑骑士",
            xinghao: "1号",
            pinhao: "666666",
            code: "1000019845",
            ms: "双鹿碳性黑骑士XXXXX",
            count: 100
        }];


        table.render({
            elem: '#result'
          , data: data
          , page: true //开启分页
          , cols: [[ //表头
              { type: 'checkbox', fixed: 'left' },
            { field: 'type', title: '产品类型', width: 110 }
            , { field: 'xilie', title: '产品系列', width: 150 }
            , { field: 'xinghao', title: '产品型号', width: 150 }
            , { field: 'pinhao', title: '产品品号', width: 90 }
            , { field: 'ms', title: '产品名称', width: 110 }
            , { fixed: 'right', width: 70, align: 'center', toolbar: '#bar' }
          ]]
        });

        table.on('tool(result)', function (obj) { //注：tool是工具条事件名，test是table原始容器的属性 lay-filter="对应的值"
            var data = obj.data; //获得当前行数据
            var layEvent = obj.event; //获得 lay-event 对应的值（也可以是表头的 event 参数对应的值）
            var tr = obj.tr; //获得当前行 tr 的DOM对象

            if (obj.event == 'edit') {
                //if (data.ISACTIVE == 2) {
                //    layer.msg("当前状态不可编辑");
                //    return false;
                //}
                sessionStorage.setItem("id", obj.data.KHID);
                sessionStorage.setItem("justwatch", "0");
                //window.location.href = "../KeHu/Update";
                window.open("../Order/Update_Product");
            }
            else if (obj.event == 'watch') {
                sessionStorage.setItem("id", obj.data.KHID);
                sessionStorage.setItem("justwatch", "1");
                //window.location.href = "../KeHu/Update";
                window.open("../KeHu/Update");
            }
            else if (obj.event == 'delete') {
                if (data.ISACTIVE == 2) {
                    layer.msg("当前状态不可删除");
                    return false;
                }

                layer.open({
                    title: '提示',
                    type: 0,
                    content: '确定删除?',
                    btn: ['确定', '取消'],
                    yes: function (index, layero) {

                        layer.close(index);
                    }
                });

            }
            else if (layEvent == "onlywatch") {
                sessionStorage.setItem("id", obj.data.KHID);
                //window.location.href = "../KeHu/Update";
                window.open("../KeHu/Update_SelectOnly");
            }


        });


    });



</script>


@section scripts {
    @Scripts.Render("~/bundles/CRM/KeHu/Select")
}