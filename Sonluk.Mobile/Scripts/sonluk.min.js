var sonluk={v:"1.02.051310",g:"1",name:"Sonluk",config:{globalize:{active:true,autoRepLayui:true,async:false,useUrl:true,base:"../../Global/",url:"../../MES/Tools/GlobalResources",culture:"zh-CN"},http:{api:{DFLT:{address:"",contentType:"application/json; charset=UTF-8",requestData:function(a){return JSON.stringify(a)},responseData:function(a){return JSON.parse(a)}}}},cookie:{active:true,global:"Local.Culture"},local:{active:true,all:"Config",style:"Style",global:"Local.Culture"},layui:{autoReplace:true,all:false},prototype:{active:true,all:false,string:true,convert:true}},value:{style:{color:{tag:"#009688",lr:"#393D49",head:"#23262E"}},global:{common:{layui_DaoDi:"到第",layui_Ye:"页",layui_QueDing:"确定",layui_Gong:"共",layui_Tiao:"条",layui_title_infor:"信息",layui_btn_confirm:"确定",layui_btn_cancel:"取消",layui_msg_S:"提示",layui_msg_W:"警告",layui_msg_E:"错误",layui_msg_btn:"确认",layui_msg_table_code:"消息代码",layui_msg_table_type:"消息类型",layui_msg_table_content:"消息内容"},lv:{}},url:{area:"",controller:"",action:""},layui:{table:{}}},global:{replaceLayui:function(){sonluk.layui.fn.replaceLayui()},setCulture:function(a){sonluk.culture=a},getResources:function(a,b,c){if(sonluk.config.globalize.autoRepLayui){sonluk.layui.fn.replaceLayui()}a=a||"common";b=b||"common";if(sonluk.config.globalize.useUrl){sonluk.global.urlFunc(a,b,c)}else{sonluk.global.baseFunc(a,b,c)}if(sonluk.config.globalize.active){$(document).ready(function(){$("[lid]").each(function(){var d="";var h=$(this).attr("lid").split("+");var g=true;for(var f=0;f<h.length;f++){if(g){if(sonluk.value.global.lv[h[f]]){d=d+sonluk.value.global.lv[h[f]];g=false}}if(g){for(let key in sonluk.value.global){if(key!=="lv"&&key!=="common"){var e=h[f].replace(key+"_","");if(h[f].split("_")[0]===key&&sonluk.value.global[key][e]){d=d+sonluk.value.global[key][e];g=false;break}}}}if(g){if(sonluk.value.global.common[h[f]]){d=d+sonluk.value.global.common[h[f]];g=false}}if(g){break}}if(!g){sonluk.global.lidFunc($(this).attr("lid"),d)}})})}},getResourcesOnly:function(a,b,c){a=a||"common";b=b||"common";if(sonluk.config.globalize.useUrl){sonluk.global.urlFunc(a,b,c)}else{sonluk.global.baseFunc(a,b,c)}},setTitle:function(a){$("head > title").html(a)},baseFunc:function(k,a,j){j=j||"";var c=sonluk.config.globalize.base||"../../";var b=c+k;var d=sonluk.config.globalize.culture.split(/-|_/)[0];switch(d){case"en":case"vi":case"zh":break;default:d="zh";break}var g=["-"+d+".json",".json","-zh.json"];for(var f=0;f<g.length;f++){var h=b+g[f];var e=false;sonluk.fn.get(h,sonluk.config.globalize.async,function(i){if(j==="merge"&&sonluk.value.global[a]){$.extend(sonluk.value.global[a],i)}else{sonluk.value.global[a]=i}e=true});if(e){break}}},urlFunc:function(a,b,c){c=c||"";culture=sonluk.config.globalize.culture.split(/-|_/)[0];switch(culture){case"en":case"vi":case"zh":break;default:culture="zh";break}sonluk.fn.post(sonluk.config.globalize.url,{culture:culture,location:a},sonluk.config.globalize.async,function(d){if(c==="merge"&&sonluk.value.global[b]){$.extend(sonluk.value.global[b],d)}else{sonluk.value.global[b]=d}})},lidFunc:function(b,a){if($("[lid='"+b+"']").attr("type")=="radio"){$("[lid='"+b+"']").attr("title",a)}else{if($("[lid='"+b+"']").attr("type")=="text"&&$("[lid='"+b+"']")[0].tagName=="INPUT"){$("[lid='"+b+"']").attr("placeholder",a)}else{$("[lid='"+b+"']").html(a)}}}},fn:{rt:function(a){a=a||"";switch(a){case"value":return sonluk.value;break;case"config":return sonluk.config;break;case"style":return sonluk.style;break;case"local":return sonluk.local;break;default:return sonluk}},save:function(a){sonluk.local.cover(sonluk.local.name(),sonluk.value);return sonluk.fn.rt(a)},post:function(c,a,b,d){sonluk.http.ajax({type:"POST",async:b,url:c,data:a,success:function(e){if(e!==""){d(JSON.parse(e))}else{d(e)}}})},get:function(a,b,c){sonluk.http.ajax({type:"GET",async:b,url:a,success:function(d){if(d!==""){c(JSON.parse(d))}else{c(d)}}})},load:function(b,d){var a=document.createElement("script");var c=d||function(){};a.type="text/javascript";if(a.readyState){a.onreadystatechange=function(){if(a.readyState=="loaded"||a.readyState=="complete"){a.onreadystatechange=null;c()}}}else{a.onload=function(){c()}}a.src=b;document.getElementsByTagName("head")[0].appendChild(a)}},style:{read:function(a){a=a||sonluk.local.name();var b=null;if(sonluk.local.available()){if(sonluk.local.exist(a)){b=sonluk.local.get(a)}else{b=""}}return b},apply:function(a){a=a||sonluk.value;$(".layui-elem-field").css("color",a.style.color.tag||sonluk.value.style.color.tag);$(".layui-elem-field").css("border-color",a.style.color.tag||sonluk.value.style.color.tag);$(".layui-side .layui-nav").css("background-color",a.style.color.lr||sonluk.value.style.color.lr);$(".layui-header").css("background-color",a.style.color.head||sonluk.value.style.color.head);return true},auto:function(b){b=b||"";var a=sonluk.style.read()||"";if(a==null){return false}switch(b){case"set":if(a==""){a=sonluk.value;sonluk.local.set(sonluk.local.name(),a);sonluk.style.apply(a);return true}else{sonluk.style.apply(a);return true}break;case"mix":if(a==""){a=sonluk.value;sonluk.local.set(sonluk.local.name(),a);sonluk.style.apply(a);return true}else{sonluk.value=a;sonluk.style.apply(a);return true}break;default:if(a!=""){sonluk.style.apply(a);return true}break}},tagColor:function(a){return sonluk.style.dot(a,sonluk.value.style.color.tag)},lrColor:function(a){return sonluk.style.dot(a,sonluk.value.style.color.lr)},headColor:function(a){return sonluk.style.dot(a,sonluk.value.style.color.head)},dot:function(a,b){if(a===undefined){return b}else{a==a||""}b=a;sonluk.style.apply(sonluk.value);return this},save:function(a){if(a===undefined||a===null){return this}else{return sonluk.fn.save(a)}},rt:function(a){return sonluk.fn.rt(a)}},http:{download:function(d,c){var b=$("<a></a>").attr("href","data:*/*;base64,"+d).attr("download",c).appendTo("body");b[0].click();b.remove()},upload:function(a){var c=document.querySelector(a.elem);a.success=a.success||function(f){};a.error=a.error||function(f){};a.complete=a.complete||function(f){};a.progress=a.progress||function(f){};a.before=a.before||function(f){};a.name=a.name||"file";a.before(c);var d=new FormData();if(c.files.length>0){for(var b=0;b<c.files.length;b++){d.append(a.name,c.files[b])}}else{return}var e=new XMLHttpRequest();e.addEventListener("load",function(f){if(f.srcElement.status===200){a.success(f.srcElement.response)}else{a.error(f.srcElement)}});e.addEventListener("error",function(f){a.error(f.srcElement)});e.addEventListener("loadend",function(f){a.complete(f.srcElement)});e.upload.addEventListener("progress",function(f){if(f.lengthComputable){a.progress(Math.ceil(f.loaded*100/f.total)+"%",f)}},false);e.open("POST",a.url);e.send(d)},api:{sdownload:function(a,c,b,d){sonluk.http.api.download(sonluk.http.api.fn.ptokenAdd(a),c,b,d);return sonluk.http.api},sget:function(a,d,b,c){sonluk.http.api.get(sonluk.http.api.fn.ptokenAdd(a),d,b,c);return sonluk.http.api},spost:function(a,d,e,b,c){sonluk.http.api.post(sonluk.http.api.fn.ptokenAdd(a),d,e,b,c);return sonluk.http.api},download:function(h,d,e,g){var a;var f="DFLT";var c=true;var j;if(typeof h==="object"){if(typeof h.url==="string"){a=h.url}if(typeof h.module==="string"){f=h.module}if(typeof h.get==="boolean"){c=h.get}if(typeof h.data==="object"){j=h.data}}else{if(typeof h==="string"){a=h}if(typeof d==="string"){f=d}if(typeof e==="boolean"){c=e}if(typeof g==="object"){j=g}}f=sonluk.config.http.api[f]||sonluk.config.http.api.DFLT;f.address=f.address||sonluk.config.http.api.DFLT.address;if(e){window.open(f.address+a,"_self")}else{var b=$("<form>");b.attr("method","post");b.attr("action",f.address+a);var i=$("<input>");i.attr("type","hidden");i.attr("name","input");i.attr("value",JSON.stringify(j));b.append(i);b.appendTo("body");b.submit();i.remove();b.remove()}return sonluk.http.api},get:function(a,h,c,e){var g;var b;var d="DFLT";var f;if(typeof a==="object"){if(typeof a.url==="string"){g=a.url}if(typeof a.success==="function"){b=a.success}if(typeof a.module==="string"){d=a.module}if(typeof a.async==="boolean"){f=a.async}}else{if(typeof a==="string"){g=a;if(typeof h==="function"){b=h}if(typeof c==="string"){d=c}if(typeof e==="boolean"){f=e}}else{return false}}d=sonluk.config.http.api[d]||sonluk.config.http.api.DFLT;d.address=d.address||sonluk.config.http.api.DFLT.address;d.contentType=d.contentType||sonluk.config.http.api.DFLT.contentType;d.responseData=d.responseData||sonluk.config.http.api.DFLT.responseData;sonluk.http.ajax({type:"GET",contentType:d.contentType,async:f,success:function(i){b(d.responseData(i))},url:d.address+g});return sonluk.http.api},post:function(g,e,h,b,d){var a;var i;var j;var c="DFLT";var f;if(typeof g==="object"){if(typeof g.url==="string"){a=g.url}if(typeof g.data==="object"&&g.data!==null){i=g.data}if(typeof g.success==="function"){j=g.success}if(typeof g.module==="string"){c=g.module}if(typeof g.async==="boolean"){f=g.async}}else{if(typeof g==="string"){a=g;if(typeof e==="object"&&e!==null){i=e}if(typeof h==="function"){j=h}if(typeof b==="string"){c=b}if(typeof d==="boolean"){f=d}}else{return false}}c=sonluk.config.http.api[c]||sonluk.config.http.api.DFLT;c.address=c.address||sonluk.config.http.api.DFLT.address;c.contentType=c.contentType||sonluk.config.http.api.DFLT.contentType;c.requestData=c.requestData||sonluk.config.http.api.DFLT.requestData;c.responseData=c.responseData||sonluk.config.http.api.DFLT.responseData;sonluk.http.ajax({type:"POST",contentType:c.contentType,async:f,data:c.requestData(i),success:function(k){j(c.responseData(k))},url:c.address+a});return sonluk.http.api},fn:{ptokenAdd:function(a){var b=sonluk.cookie.get("token");if(typeof a==="object"&&typeof a.url==="string"){a.url=sonluk.http.api.fn.urlQueryAdd(a.url,"ptoken",b)}else{if(typeof a==="string"){a=sonluk.http.api.fn.urlQueryAdd(a,"ptoken",b)}}return a},urlQueryAdd:function(a,b,c){if(a.indexOf("?")==-1){a=a+"?"+b+"="+c}else{a=a.replace(a.split("?")[0]+"?",a.split("?")[0]+"?"+b+"="+c+"&")}return a}}},ajax:function(a){if(a.async==undefined){a.async=true}a.data=a.data||"";a.success=a.success||function(d){};a.error=a.error||function(d){};a.complete=a.complete||function(d){};a.url=a.url||"";a.type=a.type||"GET";if(a.contentType===undefined){var b=new FormData();for(let key in a.data){b.append(key,a.data[key])}a.data=b}else{if(a.contentType.indexOf("application/x-www-form-urlencoded")!=-1){var b="";for(let key in a.data){b+=key+"="+a.data[key]+"&"}a.data=encodeURI(b.substring(0,b.length-1))}}var c=new XMLHttpRequest();c.addEventListener("load",function(d){if(d.srcElement.status===200||d.srcElement.status===304){a.success(d.srcElement.response)}else{a.error(d.srcElement)}});c.addEventListener("error",function(d){a.error(d.srcElement)});c.addEventListener("loadend",function(d){a.complete(d.srcElement)});c.open(a.type,a.url,a.async);if(a.contentType!==undefined){c.setRequestHeader("Content-type",a.contentType)}c.send(a.data)}},cookie:{get:function(d){var b=d+"=";var f=decodeURIComponent(document.cookie);var a=f.split(";");for(var e=0;e<a.length;e++){var g=a[e];while(g.charAt(0)==" "){g=g.substring(1)}if(g.indexOf(b)==0){return g.substring(b.length,g.length)}}return""}},local:{name:function(a){if(a===undefined){return sonluk.config.local.all+"."+sonluk.g}else{if(a===null||a===0||a===""||a==="new"){return sonluk.name+window.document.location.pathname.replace(/\/***/g,".")}}},set:function(a,b){if(localStorage.hasOwnProperty(a)){return false}else{localStorage.setItem(a,JSON.stringify(b));return true}},cover:function(a,b){localStorage.setItem(a,JSON.stringify(b));return true},update:function(a,b){if(localStorage.hasOwnProperty(a)){localStorage.setItem(a,JSON.stringify(b));return true}else{return false}},get:function(a){return JSON.parse(localStorage.getItem(a))},remove:function(a){localStorage.removeItem(a);return true},clear:function(){localStorage.clear();return true},exist:function(a){if(!localStorage.hasOwnProperty(a)||localStorage.getItem(a)==null){return false}else{return true}},usage:function(){var a=0;for(item in window.localStorage){if(window.localStorage.hasOwnProperty(item)){a+=window.localStorage.getItem(item).length}}return((a/1024).toFixed(2)+"KB")},available:function(){var a="";if(sonluk.local.exist("test")){return true}else{sonluk.local.set("test",a);if(sonluk.local.get("test")==a){return true}else{return false}}},rt:function(a){return sonluk.fn.rt(a)}},math:{newnn:function(d){var b=-1;if(d.length>0){var a=true;b=-d.length-1;while(a){a=false;for(var c=0;c<d.length;c++){if(b==d[c].RI){b=b-1;a=true;break}}}}return b},timespan:function(c,a,b){b=b||"s";c=sonluk.convert.toDatetime(c);a=sonluk.convert.toDatetime(a);switch(b){case"c":case"century":case"世纪":return(a.getFullYear()-c.getFullYear())/100;case"y":case"year":case"年":case"年份":return a.getFullYear()-c.getFullYear();case"m":case"month":case"月":case"月份":return(a.getFullYear()-c.getFullYear())*12+a.getMonth()-c.getMonth();case"w":case"week":case"周":case"礼拜":return parseFloat((a-c)/604800000);case"d":case"day":case"日":case"天":return parseFloat((a-c)/86400000);case"h":case"hour":case"时":case"小时":return parseFloat((a-c)/3600000);case"min":case"minute":case"分":case"分钟":return parseFloat((a-c)/60000);case"s":case"second":case"秒":return parseFloat((a-c)/1000);default:return parseInt(a-c)}}},date:{now:function(b){b=b||"-";var a=new Date();var c=sonluk.format.prefix;return a.getFullYear()+b+c((a.getMonth()+1),2)+b+c(a.getDate(),2)}},time:{now:function(b){b=b||":";var a=new Date();var c=sonluk.format.prefix;return c(a.getHours(),2)+b+c(a.getMinutes(),2)+b+c(a.getSeconds(),2)}},convert:{toDatetime:function(str){if(str instanceof Date){return str}else{str=str.toString();var dateArray=str.match(/\d+/g);if(dateArray[0].length==4){dateArray[1]=dateArray[1]-1;return eval("new Date("+dateArray+")")}else{if(dateArray[2]==4){var temp=dateArray[0]-1;dateArray[0]=dateArray[2];dateArray[2]=dateArray[1];dateArray[1]=temp;return eval("new Date("+dateArray+")")}else{if(str.match(/\D/)[0]==":"||str.match(/\D/)[0]=="："){dateArray.unshift(1);dateArray.unshift(0);dateArray.unshift(1000);return eval("new Date("+dateArray+")")}else{dateArray.unshift(1000);return eval("new Date("+dateArray+")")}}}}}},format:{datetime:function(a,i){i=i||"";if(a===undefined||a==null||a==""||a==0){a=new Date()}else{a=sonluk.convert.toDatetime(a)}var d=sonluk.format.prefix;var g=a.getFullYear();var f=a.getMonth()+1;var h=a.getDate();var b=a.getHours();var c=a.getMinutes();var e=a.getSeconds();switch(i){case"yyyy-mm-dd hh:mm:ss":return g+"-"+d(f,2)+"-"+d(h,2)+" "+d(b,2)+":"+d(c,2)+":"+d(e,2);break;case"yyyy-mm-dd hh:mm":return g+"-"+d(f,2)+"-"+d(h,2)+" "+d(b,2)+":"+d(c,2);break;case"yyyy-mm-dd":return g+"-"+d(f,2)+"-"+d(h,2);break;default:return g+"-"+d(f,2)+"-"+d(h,2)+" "+d(b,2)+":"+d(c,2)+":"+d(e,2);break}},prefix:function(e,b,a){e=e.toString();if(/^(-?\d+)(\.\d+)?$/.test(e)){a=a||"0"}else{a=a||" "}var c=e;if(b>e.length){for(var d=0;d<b-e.length;d++){c=a+c}}return c},suffix:function(e,b,a){e=e.toString();if(/^(-?\d+)(\.\d+)?$/.test(e)){a=a||"0"}else{a=a||" "}var c=e;if(b>e.length){for(var d=0;d<b-e.length;d++){c=c+a}}return c}},msg:{open:function(d,c,b,e){c=c||"S";e=typeof e==="number"?e:3;var f="";var a=0;switch(c){case"E":b=typeof b==="number"?b:5;a=5;f='<i class="layui-icon layui-icon-notice" style="font-size:18px; color:white;"></i><span style="margin-left:10px; font-size:16px;">'+sonluk.value.global.common.layui_msg_E+"<span>";break;case"W":b=typeof b==="number"?b:5;a=0;f='<i class="layui-icon layui-icon-notice" style="font-size:18px; color:white;"></i><span style="margin-left:10px; font-size:16px;">'+sonluk.value.global.common.layui_msg_W+"<span>";break;case"I":default:b=typeof b==="number"?b:0;a=6;f='<i class="layui-icon layui-icon-notice" style="font-size:18px; color:white;"></i><span style="margin-left:10px; font-size:16px;">'+sonluk.value.global.common.layui_msg_S+"<span>";break}switch(b){case 0:layui.layer.msg(sonluk.msg.fn.combine(d),{icon:a,time:e*1000});break;case 1:sonluk.layui.layer.alert(sonluk.msg.fn.combine(d),{title:f,skin:"layui-layer-molv",closeBtn:0});break;case 2:layui.layer.msg('<div style="padding:20px;"><table class="layui-hide" id="sonluk_msg_open2" lay-filter="sonluk_msg_open2"></table></div>',{icon:a,time:e*1000,area:"700px",offset:"30%"});sonluk.layui.table.render({elem:"#sonluk_msg_open2",data:sonluk.msg.fn.list(d),cols:[[{field:"code",title:sonluk.value.global.common.layui_msg_table_code},{field:"type",title:sonluk.value.global.common.layui_msg_table_type},{field:"message",title:sonluk.value.global.common.layui_msg_table_content,minWidth:150,align:"left"}]]});break;case 3:layui.layer.open({type:1,skin:"layui-layer-molv",closeBtn:1,area:["700px","430px"],anim:0,btn:[sonluk.value.global.common.layui_msg_btn],title:f,shade:0.5,shadeClose:false,content:'<div style="padding:20px;"><table class="layui-hide" id="sonluk_msg_open3" lay-filter="sonluk_msg_open3"></table></div>'});sonluk.layui.table.render({elem:"#sonluk_msg_open3",data:sonluk.msg.fn.list(d),height:265,cols:[[{field:"code",title:sonluk.value.global.common.layui_msg_table_code},{field:"type",title:sonluk.value.global.common.layui_msg_table_type},{field:"message",title:sonluk.value.global.common.layui_msg_table_content,minWidth:150,align:"left"}]],page:{curr:1,limit:5,limits:[5]}});break;case 4:layui.layer.msg(sonluk.msg.fn.merge(d,false),{skin:"layui-layer-molv",time:e*1000});break;case 5:default:layui.layer.open({type:1,skin:"layui-layer-molv",closeBtn:1,area:sonluk.msg.fn.fix(d),anim:0,btn:[sonluk.value.global.common.layui_msg_btn],title:f,shade:0.5,shadeClose:false,content:sonluk.msg.fn.merge(d)});break}},success:function(b,a,c){sonluk.msg.open(b,"I",a,c)},warning:function(b,a,c){sonluk.msg.open(b,"W",a,c)},error:function(b,a,c){sonluk.msg.open(b,"E",a,c)},fn:{combine:function(b){var c="";if(typeof b==="object"){if(b instanceof Array){for(var a=0;a<b.length;a++){if(typeof b[a]==="string"){c=c+b[a]+"</br>"}else{c=c+"【"+b[a].code+"("+b[a].type+")】"+b[a].message+"</br>"}}}else{c=b[a].type+b[a].code+b[a].message}}else{c=b}return c},merge:function(e,a){var c="margin-top:6px;";if(typeof a==="boolean"&&a===false){c=""}var d="";if(typeof e==="object"){if(e instanceof Array){for(var b=0;b<e.length;b++){d=d+'<div style="padding:10px 20px; display:flex;">';if(typeof e[b]==="string"){d=d+e[b]}else{d=d+sonluk.msg.fn.type(e[b].type)+'<span style="margin-left:15px; float:left;'+c+'">'+e[b].code+" "+e[b].message+"</span>"}d=d+"</div>"}}else{d='<div style="padding:10px 20px;">'+sonluk.msg.fn.type(e.type)+'<span style="margin-left:15px; float:left;'+c+'">'+e.code+" "+e.message+"</span></div>"}}else{d='<div style="padding:10px 20px;">'+e+"</div >"}return d},list:function(a){if(typeof a==="object"){if(a instanceof Array){return a}else{var b=[];b.push(a);return b}}else{var b=[{code:"",type:"",message:a}];return b}},fix:function(e){var a=100;var c=200;if(e instanceof Array){a=a+e.length*47;for(var b=0;b<e.length;b++){var d=document.createElement("span");d.innerText=e[b].code+" "+e[b].message;document.querySelector("body").append(d);if(c<d.offsetWidth+100){c=d.offsetWidth+100}d.remove()}}if(a>500){a=500}if(c<a+150){c=a+150}if(c>1000){c=1000}return[c+"px",a+"px"]},type:function(b,a){a=a||"25px";switch(b){case"I":case"S":return'<i class="layui-icon layui-icon-face-smile" style="font-size: '+a+'; color:green; float:left;"></i>';case"W":return'<i class="layui-icon layui-icon-face-surprised" style="font-size: '+a+'; color:#d26442; float:left;"></i>';case"E":default:return'<i class="layui-icon layui-icon-face-cry" style="font-size: '+a+'; color:red; float:left;"></i>'}}}},layui:{replace:function(){sonluk.layui.fn.replaceLayui()},table:{limit:function(a){return $("div[lay-id='"+a+"'] .layui-laypage-limits").find("option:selected").val()},render:function(b){var c=b.done;b.globalize=b.globalize||sonluk.config.globalize.active;b.filter=b.filter||$(b.elem).attr("lay-filter");b.id=b.id||$(b.elem).attr("id");b.value=b.value||sonluk.value.global.lv[b.id];sonluk.value.layui.table[b.id]=sonluk.value.layui.table[b.id]||{page:{curr:0}};if(b.page!==undefined){if(sonluk.value.layui.table[b.id].page.curr){b.page.curr=sonluk.value.layui.table[b.id].page.curr}else{sonluk.value.layui.table[b.id].page.curr=b.page.curr||1}b.page.limit=$("div[lay-id='"+b.filter+"'] .layui-laypage-limits").find("option:selected").val()||b.page.limit;var a=Math.ceil(b.data.length/b.page.limit);if(a<b.page.curr){b.page.curr=Number(a)}}if(b.globalize){b.cols=sonluk.layui.fn.globalizeCols(b.cols,b.value)}if(b.cols&&b.cols.length){sonluk.layui.fn.widthCols(b.cols,b.elem)}b.done=function(d,f,e){if(b.globalize&&b.page){sonluk.layui.fn.globalizePage(b.filter)}if(b.page!==undefined){sonluk.value.layui.table[b.id].page.curr=f}if(c!==undefined){c(d,f,e)}};if(sonluk.layui.former.module.indexOf("table")!=-1){sonluk.layui.former.table.render(b)}else{layui.table.render(b)}}},laydate:{render:function(a){if(sonluk.config.globalize.culture.split(/-|_/)[0]!="zh"&&sonluk.config.globalize.active){a.lang="en"}if(sonluk.layui.former.module.indexOf("laydate")!=-1){sonluk.layui.former.laydate.render(a)}else{layui.laydate.render(a)}}},layer:{hover:function(c,e,a,b){if(a===undefined){a=true}b=b||2;var d=0;$(c).mouseenter(function(){if(a){d=layui.layer.tips(e,c,{tips:[b,"#009688"],time:0})}}).mouseleave(function(){layui.layer.close(d)})},confirm:function(c,a,d,b){if(sonluk.config.globalize.active){switch(arguments.length){case 0:case 1:a={title:sonluk.value.global.common.layui_title_infor,btn:[sonluk.value.global.common.layui_btn_confirm,sonluk.value.global.common.layui_btn_cancel]};break;default:if(typeof a==="function"){b=d;d=a;a={title:sonluk.value.global.common.layui_title_infor,btn:[sonluk.value.global.common.layui_btn_confirm,sonluk.value.global.common.layui_btn_cancel]}}else{if(a.title===undefined){a.title=sonluk.value.global.common.layui_title_infor}if(a.btn===undefined){a.btn=[sonluk.value.global.common.layui_btn_confirm,sonluk.value.global.common.layui_btn_cancel]}}break}}if(sonluk.layui.former.module.indexOf("layer")!=-1){sonluk.layui.former.layer.confirm(c,a,d,b)}else{layui.layer.confirm(c,a,d,b)}},alert:function(b,a,c){if(sonluk.config.globalize.active){switch(arguments.length){case 0:case 1:a={title:sonluk.value.global.common.layui_title_infor,btn:[sonluk.value.global.common.layui_btn_confirm]};break;default:if(typeof a==="function"){c=a;a={title:sonluk.value.global.common.layui_title_infor,btn:[sonluk.value.global.common.layui_btn_confirm]}}else{if(a.title===undefined){a.title=sonluk.value.global.common.layui_title_infor}if(a.btn===undefined){a.btn=[sonluk.value.global.common.layui_btn_confirm]}}break}}if(sonluk.layui.former.module.indexOf("layer")!=-1){sonluk.layui.former.layer.alert(b,a,c)}else{layui.layer.alert(b,a,c)}}},former:{module:[],table:{render:{}},laydate:{render:{}},layer:{confirm:{},alert:{}}},fn:{replaceLayui:function(){if(layui.table&&sonluk.layui.former.module.indexOf("table")==-1){sonluk.layui.former.table.render=layui.table.render;layui.table.render=sonluk.layui.table.render;sonluk.layui.former.module.push("table")}if(layui.laydate&&sonluk.layui.former.module.indexOf("laydate")==-1){sonluk.layui.former.laydate.render=layui.laydate.render;layui.laydate.render=sonluk.layui.laydate.render;sonluk.layui.former.module.push("laydate")}if(layui.layer&&sonluk.layui.former.module.indexOf("layer")==-1){sonluk.layui.former.layer.confirm=layui.layer.confirm;layui.layer.confirm=sonluk.layui.layer.confirm;sonluk.layui.former.layer.alert=layui.layer.alert;layui.layer.alert=sonluk.layui.layer.alert;sonluk.layui.former.module.push("layer")}},globalizePage:function(c){var b=$("div[lay-id='"+c+"'] .layui-table-page .layui-laypage-count").html()||"";if(b!=""){b=b.replace(/共/g,sonluk.value.global.common.layui_Gong).replace(/条/g,sonluk.value.global.common.layui_Tiao);$("div[lay-id='"+c+"'] .layui-table-page .layui-laypage-count").html(b);b=$("div[lay-id='"+c+"'] .layui-table-page .layui-laypage-btn").html();b=b.replace(/确定/g,sonluk.value.global.common.layui_QueDing);$("div[lay-id='"+c+"'] .layui-table-page .layui-laypage-btn").html(b);$("div[lay-id='"+c+"'] .layui-table-page .layui-laypage-skip")[0].childNodes[0].nodeValue=sonluk.value.global.common.layui_DaoDi;$("div[lay-id='"+c+"'] .layui-table-page .layui-laypage-skip")[0].childNodes[2].nodeValue=sonluk.value.global.common.layui_Ye;$("div[lay-id='"+c+"'] .layui-table-page .layui-laypage-limits select option").each(function(){$(this).html($(this).html().replace(/条/g,sonluk.value.global.common.layui_Tiao).replace(/页/g,sonluk.value.global.common.layui_Ye))})}},globalizeCols:function(e,c){e=e||[[]];c=c||"";for(var b=0;b<e.length;b++){for(var a=0;a<e[b].length;a++){var d=e[b][a].field||"";if(e[b][a].title===undefined&&c[d]){e[b][a].title=c[d]}}}return e},widthCols:function(e,c){var b=e.length-1;for(var a=0;a<e[b].length;a++){if(e[b][a].width===undefined&&e[b][a].minWidth===undefined){var d=0;if(e[b][a].sort){d=20}$(c).after('<span id = "assistWidthMeasure" style = "font-size: 14px;">'+e[b][a].title+"</span>");e[b][a].width=$("#assistWidthMeasure").width()+31+d;$("#assistWidthMeasure").remove()}e[b][a].align=e[b][a].align||"center"}return e}}}};sonluk.config.local.all=sonluk.name+"."+sonluk.config.local.all;sonluk.config.local.style=sonluk.name+"."+sonluk.config.local.style;sonluk.config.local.global=sonluk.name+"."+sonluk.config.local.global;sonluk.config.cookie.global=sonluk.name+"."+sonluk.config.cookie.global;if(layui){sonluk.config.layui.all=layui["layui.all"]?true:false}sonluk.config.globalize.autoRepLayui=sonluk.config.globalize.autoRepLayui&&sonluk.config.globalize.active&&sonluk.config.layui.all;sonluk.config.globalize.culture=sonluk.cookie.get(sonluk.config.local.global)||window.navigator.language;if(sonluk.config.globalize.active){if((sonluk.cookie.get(sonluk.config.local.global)===undefined||sonluk.cookie.get(sonluk.config.local.global)===null||sonluk.cookie.get(sonluk.config.local.global)==="")&&sonluk.local.exist(sonluk.config.local.global)){}}sonluk.config.layui.autoReplace=sonluk.config.layui.autoReplace&&sonluk.config.layui.all;if(sonluk.config.layui.autoReplace){sonluk.layui.replace()}sonluk.config.prototype.string=sonluk.config.prototype.active&&(sonluk.config.prototype.string||sonluk.config.prototype.all);sonluk.config.prototype.convert=sonluk.config.prototype.active&&(sonluk.config.prototype.convert||sonluk.config.prototype.all);if(sonluk.config.prototype.string){String.prototype.sldatetime=function(a){return sonluk.format.datetime(this.toString(),a)};String.prototype.slprefix=function(b,a){return sonluk.format.suffix(this.toString(),b,a)};String.prototype.slsuffix=function(b,a){return sonluk.format.suffix(this.toString(),b,a)}}if(sonluk.config.prototype.convert){String.prototype.sltoDatetime=function(){return sonluk.convert.toDatetime(this.toString())}};